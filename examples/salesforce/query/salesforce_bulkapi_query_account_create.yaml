flow:
  name: "salesforce_bulkapi_query_account"
  require_leader_election: true
  tasks:

    # Run this task on specified intervals.
    - generate:
        name: "generate_jobs"
        interval: 60

    # Create Salesforce BulkAPI query job.
    - salesforce_bulkapi_job_creator:
        name: "account_salesforce_query_job"
        credentials_path: "/etc/sfdc/credentials.json"
        job_type: "query"
        operation: "query"
        query: "SELECT Id, Name, CreatedDate, LastModifiedDate FROM Account WHERE SystemModstamp = LAST_N_DAYS:200"
        content_type: "CSV"
        column_delimiter: "COMMA"
        line_ending: "CRLF"